---
layout: custom
title: 🎭顔シェイプキープリセット（詳細ガイド）
parent: ⚙️M. Avatar Setting設定
nav_order: 6
permalink: /menno/mas-settings/face/preset-guide/
lang: ja
---

# 表情プリセット機能 - 詳細ガイド

このガイドでは、M. Avatar Settingのブレンドシェイプのプリセット機能について詳しく説明します。

![プリセット機能UI]({{ site.baseurl }}/assets/images/preset_ui.png)

## プリセットシステムの概要

表情プリセット機能は、Mennoアバターの顔のブレンドシェイプ設定を保存・管理するシステムです。

### 主な特徴

- **ノンデストラクティブ編集**: プリセットを適用しても、現在の設定を完全に上書きせず、強度を調整できます
- **レイヤー合成**: 複数のプリセットを同時に適用して、複雑な表情を作成できます
- **リアルタイムプレビュー**: 変更をすぐに確認できます
- **プロジェクト共有**: プリセットファイルを他のプロジェクトにコピーして使用できます

## プリセットのデータ構造

### 保存されるデータ

プリセットには以下の情報が保存されます：

1. **プリセット名**: ユーザーが設定した識別名
2. **ブレンドシェイプ値**: 各ブレンドシェイプの値（0.0〜1.0）
3. **作成日時**: プリセットが作成された日時

### ファイル形式

プリセットは `.asset` ファイルとして保存されます。ファイル構造の例：

### 保存場所

プリセットファイルは以下のディレクトリに保存されます：
```
Assets/emudotto/Menno/Resources/Face_Presets/
```

## 高度な使用方法

### プリセットのブレンド

複数のプリセットを同時に適用する際の計算方法：

1. **加算ブレンド**: 各プリセットの値が加算されます
   - 例: プリセットA (smile: 0.5) + プリセットB (smile: 0.3) = smile: 0.8

2. **最大値制限**: ブレンドシェイプ値は1.0を超えません
   - 例: 0.7 + 0.6 = 1.0 (1.3ではなく)

### プリセットの優先順位

- 後から適用したプリセットが優先されます
- 強度0%のプリセットは無視されます
- リアルタイムで変更される値が最優先されます

## トラブルシューティング

### よくある問題と解決方法

#### プリセットが保存されない
- **原因**: ファイル書き込み権限がない
- **解決**: Unityプロジェクトフォルダの権限を確認

#### プリセットが適用されない
- **原因**: ブレンドシェイプ名が変更された
- **解決**: プリセットを再作成するか、.assetファイルを手動で編集

#### プリセットの強度が効かない
- **原因**: 他のスクリプトがブレンドシェイプを制御している
- **解決**: 競合するスクリプトを無効化するか、実行順序を調整

## プリセットの共有

### エクスポート方法

1. プロジェクトウィンドウで `Face_Presets` フォルダを開く
2. 共有したいプリセットファイルを選択
3. 右クリックして「Export Package」を選択

### インポート方法

1. 受け取ったプリセットファイルをプロジェクトにドラッグ＆ドロップ
2. `Face_Presets` フォルダに配置(エクスポート時にフォルダが「Face_Presets」なら、インポート時に自動で配置されます)
3. M. Avatar Settingウィンドウを再度開く

## ベストプラクティス

## 今後の拡張予定

- プリセットのカテゴリ機能
- プリセットのお気に入り機能
- プリセットのプレビュー画像機能

## 関連リンク

- [顔の設定 - 基本ガイド]({{ site.baseurl }}/menno/mas-settings/face/)
- [M. Avatar Setting - 概要]({{ site.baseurl }}/menno/mas-settings/)
- [Mennoアバター - 公式ドキュメント]({{ site.baseurl }}/menno/) 