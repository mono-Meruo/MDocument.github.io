---
layout: default
title: シェイプキー一覧
parent: Menno
nav_order: 6
permalink: /menno/shapekeys
---

# シェイプキー一覧と説明

シェイプキーは3Dモデルの形状を変形させる機能です。Mennoモデルには合計606個のシェイプキーが実装されており、キャラクターの表情や体型を細かく調整できます。

## シェイプキー概要

### 顔 シェイプキー（合計564個）

| カテゴリ | 数 | 説明 |
|---------|-----|------|
| VRC | 18個 | VRChat用のシェイプキー（v_aa、v_ch、v_ddなど音声認識用と視線制御用） |
| EYE | 51個 | 目の表情を制御（閉じる、笑顔、つり目、たれ目、ジト目など） |
| EYE_EX | 3個 | 目のシェーダーエフェクト（Shader_ON、Shader_Big、Grabpass_ONなど） |
| EYE_Action | 7個 | 目の特殊エフェクト（涙、ハート、ぐるぐる、ガーン、星など） |
| EYE_Option | 67個 | 目の詳細調整（光、くま、位置、大きさ、間隔など） |
| PUPIL_Option | 35個 | 瞳孔の調整（白瞳孔、寄せる、離す、大小、前後移動など） |
| IRIS_Option | 18個 | 白目部分の調整（ぼかし、大きさ、前後移動など） |
| EYELID_Option | 74個 | まぶたの調整（先端、末端、上下左右の細かい動きなど） |
| EYELASH | 12個 | まつげの表情（糸目、はう目、和み目など） |
| EYELASH_Option | 48個 | まつげの調整（上下まつげの太さ、長さ、位置など） |
| EYEBROW | 48個 | まゆげの表情（上下、笑顔、怒り、困り、各部位の動きなど） |
| EYEBROW_Option | 10個 | まゆげの調整（太さ、形状、位置など） |
| MOUTH | 53個 | 口の表情（あいうえお、笑顔、ニカ、△、ωなど様々な形） |
| MOUTH_Option | 8個 | 口の調整（やえば、前後位置、頬など） |
| TONGUE | 12個 | 舌の表情（ぺろ、曲げる、前後上下の動きなど） |
| TONGUE_Option | 6個 | 舌の調整（細い、太い、平ら、厚く、長さなど） |
| TEETH_Option | 15個 | 歯の調整（やえば、ギザギザ、上下の位置など） |
| FACE | 6個 | 顔全体のエフェクト（赤面、ガーン、しわなど） |
| NOSE_Option | 7個 | 鼻の調整（上下左右、前後の位置など） |
| EAR_Option | 6個 | 耳の調整（エルフ耳、大きさなど） |
| JAW_Option | 14個 | あごの調整（丸み、えらの形状、長さ、シャープさなど） |
| SHRINK_Option | 2個 | 顔の部位の縮小（首、耳） |
| MMD | 47個 | MikuMikuDance互換の表情（あいうえお、にやり、ウィンクなど） |
| アップデート用Empty | 183個 | アップデート用の予備シェイプキー |

各カテゴリには両目用だけでなく、左目（_L）、右目（_R）用のシェイプキーも用意されており、左右非対称の表情も作ることができます。

### 体 シェイプキー（30個）

主に体の各部位の縮小設定に使用します。首、肩、腕、手、指、胸、背中、腰、脚、足など、部位ごとに縮小率を調整できます。

### 髪 シェイプキー（合計50個）

Hair_Bangsオブジェクトには以下の機能的なシェイプキーが含まれています（Emptyシェイプキーを除く）：

#### BANGS_Option（前髪）- 31個
- 基本スタイル：
  - BANGS_OP_短く_Short：前髪を短くする
  - BANGS_OP_長く_Long：前髪を長くする
  - BANGS_OP_ずらす_Shift：前髪を横にずらす
  - BANGS_OP_ねぐせ_Bedhair：寝癖のあるスタイルにする
  - BANGS_OP_ぱっつん_Straight：ぱっつんスタイル
  - BANGS_OP_ぱっつん短い_StraightShort：短めのぱっつん
  - BANGS_OP_ぱっつん長め_StraightLong：長めのぱっつん
- 個別調整：
  - BANGS_OP_01_Long～BANGS_OP_12_Long：前髪の個別の束を一本ずつ調整できるシェイプキー。各番号が前髪の特定の一束に対応しており、それぞれを独立して動かしたり形状を変えたりできます。
  - BANGS_OP_01_Short～BANGS_OP_12_Short：前髪の個別の束を一本ずつ調整できるシェイプキー。各番号が前髪の特定の一束に対応しており、それぞれを独立して動かしたり形状を変えたりできます。

#### FRONT_Option（前髪部分）- 5個
- 個別調整：
  - FRONT_OP_01_Long：前髪の特定の一束を個別に調整できるシェイプキー。
  - FRONT_OP_02_Long：前髪の別の一束を個別に調整できるシェイプキー。
  - FRONT_OP_01_Short：前髪の特定の一束を個別に調整できるシェイプキー。
  - FRONT_OP_02_Short：前髪の別の一束を個別に調整できるシェイプキー。
  - FRONT_OP_Empty：空の調整項目

#### SIDES_Option（サイド部分）- 14個
- 基本スタイル：
  - SIDES_OP_短く_Short：サイドを短くする
  - SIDES_OP_長く_Long：サイドを長くする
  - SIDES_OP_ぱっつん_Straight：サイドをぱっつんスタイルにする
- 個別調整：
  - SIDES_OP_01_Long～SIDES_OP_05_Long：サイドの個別の束を一本ずつ調整できるシェイプキー。各番号がサイドの特定の一束に対応しており、それぞれを独立して動かしたり形状を変えたりできます。
  - SIDES_OP_01_Short～SIDES_OP_05_Short：サイドの個別の束を一本ずつ調整できるシェイプキー。各番号がサイドの特定の一束に対応しており、それぞれを独立して動かしたり形状を変えたりできます。
  - SIDES_OP_Empty：空の調整項目

これらの番号付きシェイプキー（01、02など）を使用することで、髪型全体ではなく特定の髪の束だけを一本ずつ自由に調整できます。例えば、前髪の左側の特定の一束だけを動かしたり、サイドの特定の一束だけを形状変更したりすることが可能です。これにより、髪型の細部まで自分好みにカスタマイズできます。

## Emptyシェイプキーについて

Unityでのアップデート時に新しいシェイプキーを挿入すると、既存シェイプキーの順番がずれ、設定済みの数値と不一致が発生する場合があります。これを防ぐため、あらかじめ空のシェイプキー（Empty）を多数配置しています。アップデート時には、これらのEmptyシェイプキーを使用して新機能を追加します。

## シェイプキーの使用方法

1. Unityのインスペクターでモデルを選択
2. SkinnedMeshRendererコンポーネントを選択
3. 「Blend Shapes」セクションで各シェイプキーのスライダーを調整
4. 0～100の間で値を設定（0=効果なし、100=最大効果）

シェイプキーを組み合わせることで、独自の表情や体型を作成できます。

## シェイプキー調整の注意点

### アニメーションへの影響

目や口などの表情に関わる部分に大幅な変更を加えると、デフォルトの表情アニメーションが正常に動作しなくなる場合があります。これは、アニメーションが元の形状を前提として作られているためです。

例えば：
- 目の大きさや位置を大きく変更すると、まばたきアニメーションが不自然になる
- 口の形状を変えると、発話アニメーションがずれる
- 顔の比率を変更すると、表情アニメーション全体が崩れる

このような場合は、アニメーションクリップを調整して新しい形状に合わせる必要があります。

### シェイプキーの柔軟な活用

Mennoモデルでは、表情用シェイプキー（EYE、MOUTH、EYEBROWなど）を体型調整に使用したり、逆に詳細調整用のシェイプキー（_Optionカテゴリ）を表情として利用することも可能です。

例えば：
- EYE_Option系のシェイプキーを組み合わせて独自の目の表情を作る
- MOUTH_Optionを使って特殊な口の形状を表情として使用する
- 通常は調整用のJAW_Optionを表情アニメーションに組み込む

### 表情アニメーションの調整方法

シェイプキーを大幅に変更した場合は、表情アニメーションも調整する必要があります。Mennoモデルでは以下の手順で調整できます：

1. AnimatorコンポーネントにMenno_Layer_FX.controllerを設定する
   - Mennoアバターのルートオブジェクトを選択
   - Animatorコンポーネントに「Menno_Layer_FX.controller」を追加
   - このコントローラーには、表情アニメーションのデフォルト設定が含まれています

2. Animationウィンドウでデフォルト表情を調整
   - Unityの「Window」→「Animation」→「Animation」でAnimationウィンドウを開く
   - シーン内でMennoアバターを選択
   - Animationウィンドウに表示される既存の表情アニメーションを選択
   - 調整したシェイプキーに対応するキーフレームを変更
     - キーフレームをクリックして数値を編集

3. 調整した表情をテスト
   - VRChat Gesture Managerなどで表情の動きを確認
   - 必要に応じて微調整

この方法により、カスタマイズしたシェイプキーの設定に合わせて既存の表情アニメーションを適切に調整できます。